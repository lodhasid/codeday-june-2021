function preload(){this.load.image("background","backgroundfinal.JFIF"),this.load.image("deathscreen","deathscreen.png"),this.load.image("winscreen","winscreen.png"),this.load.spritesheet("spaceman","spritesheet.png",{frameWidth:512,frameHeight:512}),this.load.image("objective","objective.png"),this.load.image("asteroid1","/asteroids/Stones_15.png"),this.load.image("asteroid2","/asteroids/Stones2Filled_02.png"),this.load.image("asteroid3","/asteroids/Stones2Filled_17.png"),this.load.image("batteries","battery.png"),this.load.json("leftastrobounds","leftastro.json"),window.cursors=this.input.keyboard.createCursorKeys()}function create(){this.add.image(960,540,"background"),asteroids=this.physics.add.group({key:"asteroids"}),batteries=this.physics.add.staticGroup();var t;objective=this.physics.add.sprite(500*Math.random(),1080*Math.random(),"objective"),objective.setCollideWorldBounds(!0),objective.setBounce(1),objective.setVelocityX(-60),objective.setVelocityY(-60),player=this.physics.add.sprite(1800,540,"spaceman"),player.setScale(.3),player.setCollideWorldBounds(!0),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("spaceman",{start:0,end:0})}),this.anims.create({key:"leftmoving",frames:this.anims.generateFrameNumbers("spaceman",{start:1,end:1})}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("spaceman",{start:2,end:2})}),this.anims.create({key:"rightmoving",frames:this.anims.generateFrameNumbers("spaceman",{start:3,end:3})});var s,o,i,r=[],l=Math.floor(1600*Math.random())+52,d=Math.floor(978*Math.random())+52;for(spacething=asteroids.create(l,d,"asteroid3").setScale(1.3).refreshBody(),spacething.body.setVelocity(250*Math.random(),[250*Math.random()]),spacething.setBounce(1),spacething.setCollideWorldBounds(!0),spacething.body.setCircle(65),r.push([l,d]),z=0;6>z;z++)s=Math.floor(1600*Math.random())+52,o=Math.floor(978*Math.random())+52,i=1+Math.random()/2,rock=asteroids.create(s,o,"asteroid3").setScale(i).refreshBody(),rock.body.setVelocity(250*Math.random(),[250*Math.random()]),rock.setBounce(1),rock.setCollideWorldBounds(!0),rock.body.setCircle(50*i),r.forEach(function(e){for(forvar=0;1==forvar;forvar--)e[0]-200<s<e[0]+200&&e[1]-200<o<e[1]+200||e[0]-160<player.body.x<e[0]+160&&e[1]-160<player.body.y<e[1]+160?(asteroids.remove(rock,!0),s=Math.floor(1818*Math.random())+52,o=Math.floor(978*Math.random())+52,console.log(s),rock=asteroids.create(s,o,"asteroid3").setScale(i).refreshBody(),rock.body.setCircle(50*i)):forvar=1;r.push([s,o])});var t;for(t=0;13>t;t++)batteries.create(1856*Math.random()+32,1016*Math.random()+32,"batteries");this.physics.add.overlap(player,asteroids,touching_rocks,null,this),this.physics.add.collider(asteroids,batteries),player.setScale(.3),this.physics.add.overlap(player,batteries,energy,null,this),player.setCollideWorldBounds(!0),this.physics.add.collider(asteroids,objective),player.setScale(.3),this.physics.add.overlap(player,objective,objective_dude,null,this),player.setCollideWorldBounds(!0)}function sleep(){energy_remaining>0&&(energy_remaining-=1)}function energy(e,t){energy_remaining+=5,t.disableBody(!0,!0)}function objective_dude(e,t){captured_objective=!0,t.disableBody(!0,!0),this.add.image(960,540,"winscreen"),this.scene.pause()}function touching_rocks(){death=!0,this.add.image(960,540,"deathscreen"),document.getElementById("flashlightStyles").disabled=!0;var a=document.createElement("a");a.href="/level3.html",a.innerHTML="Play Again ðŸŒŒ",document.getElementById("flashlightHolder").append(a),this.scene.pause()}function flashlight_update(e){if(0==energy_remaining)return document.documentElement.style.setProperty("--cursorX","9999px"),void document.documentElement.style.setProperty("--cursorY","9999px");var t=e.clientX,a=e.clientY;document.documentElement.style.setProperty("--cursorX",t+"px"),document.documentElement.style.setProperty("--cursorY",a+"px")}function astrolight_update(){var e=player.body.x/1920,t=player.body.y/1080;document.documentElement.style.setProperty("--astroX",e),document.documentElement.style.setProperty("--astroY",t)}function update(){window.cursors.left.isDown?(player.setVelocityX(-150),player.anims.play("leftmoving",!0)):window.cursors.right.isDown?(player.setVelocityX(150),player.anims.play("rightmoving",!0)):(player.body.velocity.x>0&&(player.setVelocityX(player.body.velocity.x-3),player.anims.play("right",!0)),player.body.velocity.x<0&&(player.setVelocityX(player.body.velocity.x+3),player.anims.play("left",!0))),window.cursors.up.isDown?player.setVelocityY(-150):window.cursors.down.isDown?player.setVelocityY(150):(player.body.velocity.y>0&&player.setVelocityY(player.body.velocity.y-5),player.body.velocity.y<0&&player.setVelocityY(player.body.velocity.y+5)),document.getElementById("energy").innerHTML="You have "+energy_remaining+" seconds of energy remaining"}var config={type:Phaser.AUTO,width:1920,height:1080,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{"default":"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:preload,create:create,update:update},parent:"flashlightHolder"},energy_remaining=11,captured_objective=!1,death=!1;setInterval(sleep,1e3);var game=new Phaser.Game(config);document.addEventListener("mousemove",flashlight_update),document.addEventListener("touchmove",flashlight_update),setInterval(astrolight_update,50);